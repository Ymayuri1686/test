<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Timeline Challenge â€” DigiIndia</title>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Inter:wght@300;500;700&display=swap" rel="stylesheet">

<!-- Font Awesome for home icon -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
  :root{
    --accent1: #00c6ff;
    --accent2: #0072ff;
    --bg-dark: rgba(2,8,23,0.85);
    --card-bg: rgba(6,24,40,0.8);
    --peach: #FFDAB9;
  }

  html, body { height: 100%; margin: 0; padding: 0; }
  body{
    font-family: 'Inter', 'Orbitron', Arial, sans-serif;
    color:#eaf6ff;
    display:flex; flex-direction:column; align-items:center;
    background: url('https://static.vecteezy.com/system/resources/thumbnails/072/310/978/small/futuristic-blue-and-cyan-digital-interface-background-with-abstract-tech-lines-photo.jpg') center/cover no-repeat fixed;
    min-height:100vh;
  }

  body::before{
    content:''; position:fixed; inset:0; background:linear-gradient(180deg, rgba(0,10,20,0.55), rgba(0,20,40,0.7)); pointer-events:none; z-index:0;
  }

  h1{
    z-index:2; margin-top:28px; color:#00ffff;
    font-family:'Orbitron',sans-serif; font-size:2.2rem;
    text-align:center; letter-spacing:1px; text-shadow:0 6px 30px rgba(0,150,255,0.12);
  }

  .box{
    background:linear-gradient(180deg, rgba(3,16,28,0.9), rgba(6,24,40,0.85));
    padding:22px; border-radius:14px; width:94vw; max-width:980px; margin:18px 0; z-index:2;
    border:1px solid rgba(0,198,255,0.08); box-shadow:0 10px 40px rgba(2,12,30,0.6);
  }

  p{ color:var(--peach); font-weight:500 }

  #items{ display:flex; flex-direction:column; gap:12px; margin-top:14px }

  .item{
    background:linear-gradient(90deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
    padding:14px 16px; border-radius:10px; cursor:grab; border:1px solid rgba(255,255,255,0.03);
    display:flex; align-items:center; gap:12px; font-weight:600; color:#fff; transition:transform .18s, box-shadow .18s, opacity .25s;
    opacity:0; transform: translateY(8px);
  }
  .item.enter{ opacity:1; transform:translateY(0) }
  .item:active{ cursor:grabbing }
  .item:hover{ transform:translateY(-6px); box-shadow:0 12px 30px rgba(0,0,0,0.45) }

  .item .badge{
    min-width:44px; height:44px; border-radius:8px;
    background:linear-gradient(135deg,var(--accent1),var(--accent2));
    display:flex; align-items:center; justify-content:center; color:#001; font-weight:800; margin-right:8px;
  }

  .item .handle{ margin-left:auto; opacity:0.6 }

  .controls{ display:flex; gap:10px; margin-top:12px }
  .controls button{
    padding:10px 14px; border-radius:10px; border:none;
    background:linear-gradient(90deg,var(--accent1),var(--accent2));
    color:#012; font-weight:700; cursor:pointer; box-shadow:0 8px 20px rgba(0,198,255,0.12);
    transition:transform .18s;
  }
  .controls button:hover{ transform:translateY(-4px) }

  @media(max-width:720px){
    .box{ padding:16px }
    h1{ font-size:1.6rem }
  }

  .home-overlay{
    position:fixed; inset:0; background:rgba(0,0,0,.6);
    display:flex; align-items:center; justify-content:center; z-index:999;
  }

  /* Floating Home Icon */
  #homeIcon{
    position: fixed;
    top: 20px;
    left: 20px;
    z-index: 1000;
    font-size: 2rem;
    color: #00ffff;
    text-shadow: 0 0 12px rgba(0,255,255,0.7);
    cursor: pointer;
    transition: transform 0.3s, color 0.3s;
  }
  #homeIcon:hover{
    color: #00ff88;
    transform: scale(1.2);
  }
</style>
</head>
<body>

<!-- Floating Home Icon -->
<a id="homeIcon" href="test.html" title="Go Home"><i class="fas fa-home"></i></a>

<h1>Timeline Challenge</h1>

<div class="box">
  <p style="margin:0">Drag the event cards into the correct chronological order, then press <strong>Submit</strong>.</p>
  <div style="display:flex;align-items:center;gap:12px;margin-top:10px;">
    <div style="flex:1;height:8px;background:linear-gradient(90deg,#001428,#002a44);border-radius:6px;overflow:hidden">
      <div id="progress" style="height:100%;width:0;background:linear-gradient(90deg,#00c6ff,#00ffcc);transition:width .4s"></div>
    </div>
    <div style="color:var(--peach);font-weight:700;font-size:0.95rem">Order</div>
  </div>
  <div id="items"></div>
  <div style="margin-top:10px;display:flex;gap:8px" class="controls">
    <button id="submit">Submit</button>
    <button id="shuffle">Shuffle</button>
  </div>
</div>

<!-- Home Overlay -->
<div id="home" class="home-overlay" style="display:none">
  <div class="home-card" style="background:#021427;padding:22px;border-radius:10px;color:#fff;width:320px;text-align:center">
    <h2>Welcome</h2>
    <p>Enter name to play Timeline Challenge</p>
    <input id="nameInput" placeholder="Your name" style="width:100%;padding:8px;border-radius:6px;border:none;margin-top:8px">
    <div style="margin-top:10px"><button id="start">Start</button></div>
  </div>
</div>

<script>
// Timeline events
const events = [
  {text:'Launch of national digital ID program (e.g., Aadhaar) expanded for digital services', year:2010},
  {text:'Major push for digital payments and UPI expansion', year:2016},
  {text:'State-level e-governance portals modernized', year:2014},
  {text:'Telemedicine and digital healthcare initiatives scale up', year:2020},
  {text:'Digital agriculture pilots and farmer platforms rolled out', year:2018},
  {text:'Investment in national fiber and broadband connectivity', year:2015}
];

let list = [];
let itemsEl = document.getElementById('items');
let player = localStorage.getItem('dg_player') || '';

function shuffle(){ list = events.slice().sort(()=>Math.random()-0.5); render(); }

function render(){ 
  itemsEl.innerHTML='';
  list.forEach((ev,idx)=>{
    const div = document.createElement('div'); div.className='item'; div.draggable=true; div.dataset.idx=idx;
    const badge = document.createElement('div'); badge.className='badge'; badge.textContent = idx+1;
    const text = document.createElement('div'); text.className='text'; text.textContent = ev.text;
    const handle = document.createElement('div'); handle.className='handle'; handle.innerHTML = '&#x2630;';
    div.appendChild(badge); div.appendChild(text); div.appendChild(handle);
    itemsEl.appendChild(div);
  });
  Array.from(itemsEl.children).forEach((child,i)=>{
    setTimeout(()=> child.classList.add('enter'), 60 * i);
  });
  initDnD(); 
}

function initDnD(){
  let dragSrc = null;
  itemsEl.querySelectorAll('.item').forEach(it=>{
    it.addEventListener('dragstart', e=>{ dragSrc = it; it.style.opacity='0.4'; });
    it.addEventListener('dragend', e=>{ it.style.opacity='1'; });
    it.addEventListener('dragover', e=>{ e.preventDefault(); });
    it.addEventListener('drop', e=>{
      e.preventDefault(); if(dragSrc===it) return;
      const srcIdx = Array.from(itemsEl.children).indexOf(dragSrc);
      const tgtIdx = Array.from(itemsEl.children).indexOf(it);
      if(srcIdx<0||tgtIdx<0) return;
      list.splice(tgtIdx,0,list.splice(srcIdx,1)[0]); render();
    });
  });
}

function submit(){
  let correct=0;
  for(let i=0;i<list.length;i++){
    const sorted = events.slice().sort((a,b)=>a.year-b.year);
    if(list[i].text === sorted[i].text) correct++;
  }
  const score = Math.round((correct/list.length)*100);
  document.getElementById('progress').style.width = `${score}%`;
  setTimeout(()=>{
    const name = player || localStorage.getItem('username') || prompt('Enter name for leaderboard:') || 'Anonymous';
    try{ if(window.DGLeaderboard) window.DGLeaderboard.addScore(name, 'Timeline Challenge', score); }
    catch(e){ console.warn('DGLeaderboard missing', e); }
    alert(`You scored ${score} (${correct}/${list.length} in correct positions)`);
  }, 220);
}

// Home overlay
function showHome(){ 
  const overlay=document.getElementById('home'); 
  const input=document.getElementById('nameInput'); 
  const start=document.getElementById('start'); 
  if(!player){ overlay.style.display='flex'; input.focus(); } 
  else overlay.style.display='none'; 
  start.onclick=()=>{
    const v=input.value.trim(); 
    if(!v){ alert('Enter name'); input.focus(); return; } 
    player=v; localStorage.setItem('dg_player',player); overlay.style.display='none'; 
  }
}

document.getElementById('submit').onclick = submit;
document.getElementById('shuffle').onclick = ()=>{ shuffle(); };
window.addEventListener('load', ()=>{ shuffle(); render(); showHome(); });
</script>
</body>
</html>
